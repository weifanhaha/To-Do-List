<!DOCTYPE html>
<html lang="en">

<!--created 2017/05
	credit: Wei-Fan, Chang -->
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="./style.css" rel="stylesheet" type="text/css"/>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

  	<title>To Do List</title>

</head>

<body>
	<div id="header">
		<div class="myheader">
			<h2 id="mytitle"> Things To Do Today</h2>
			<input type="text" id="myInput" placeholder="今天要做什麽呢...">
			<span onclick="newElement()" class="addBtn">Add</span>
		</div>
	</div>
	<ul id="myUL">
		<li>例：寫作業</li>
	</ul>

	<script>
		//set the date today on the title
		var Today = new Date();
		var title = (Today.getMonth()+1) + "/" + (Today.getDate()) + " To Do List";
		document.getElementById("mytitle").innerHTML = title;

		// Create a "close" button and append it to each list item
		var myNodeList = document.getElementsByTagName("LI");
		var i;
		for(i = 0; i < myNodeList.length; i++){
			var span = document.createElement("SPAN");
			var txt = document.createTextNode("\u00D7")
			span.className="close";
			span.appendChild(txt);
			myNodeList[i].appendChild(span);
		}

		//Click on a close button to hide the current list item
		var close = document.getElementsByClassName("close");
		var i;
		for( i = 0; i < close.length; i++){
			close[i].onclick = function(){
				var div = this.parentElement;
				div.style.display = "none";
			}
		}

		// Add a "checked" symbol when clicking on a list item
		var list = document.querySelector('ul');
		list.addEventListener('click', function(ev) {
		  if (ev.target.tagName === 'LI') {
		    ev.target.classList.toggle('checked');
		  }
		}, false);

		// Create a new list item when clicking on the "Add" button
		function newElement(){
			var li = document.createElement('li');
			var inputvalue = document.getElementById("myInput").value;
			var t = document.createTextNode(inputvalue);
			li.appendChild(t);
		
			if( inputvalue === ''){
				alert("You must write something");
			}
			else{
				var ul = document.getElementById("myUL");
				ul.appendChild(li);
			}

			document.getElementById("myInput").value = "";
			var span = document.createElement("SPAN");
			var txt = document.createTextNode("\u00D7")
			span.className="close";
			span.appendChild(txt);
			li.appendChild(span);
			var i;
			for( i = 0; i < close.length; i++){
				close[i].onclick = function(){
					var div = this.parentElement;
					div.style.display = "none";
				}
			}
		}

	</script>




</body>
</html>